## WORKING
   - [ ] Add isfile mock to places that require importing data to mock is.file.
   - [ ] remove server.run() because that is not needed.
   - [ ] Add uuid primary key to content database table.
   - [ ] Add test to verify that only TLS1.2 and selected ciphers are active. How and is it fast enough?

## FEATURES
   - [ ] Add compression for the response. Default is pretty print, the --compact-json is applied if request header does not request compression.
   - [ ] Add support to export content to markdown format.
   - [ ] Add --help server to list server specific commands and log parameters. Maybe add --help debug/troubleshoot? Debug better because it is shorter?
   - [ ] Add Debug() for all classes. Add debug() for snippy that calls all the debugs that Snippy imports.
   - [ ] Add UT tests for class Debug() methods.
   - [ ] Add user management for tables. Now all is in one table since there is no user concept.
   - [ ] Add user authentication. Which one: sessionID, OAuth2, JWS? Maybe OAuth2 (corporate integration) or JWS (embedded, no server?).
   - [ ] Add CORS https://stackoverflow.com/a/45183343
   - [ ] Add /snippy/api/admin/v1/settings for log config. Same base /snippy/api/ for all routes.
   - [ ] Add limit to multilevel sort fields to two fields to avoid complex scenarios.
   - [ ] Add limits to all parameters: column array size, sort array size, etc.
   - [ ] Add logic to runalias. This can be updated from REST. This should not do anything because of security?
   - [ ] Add logic versions. Change version to content_versions in base? Same all content? Requires long lines for cli.py. How describe versions?
   - [ ] Add support to print only selected fields, like brief and digest for CLI text output. Hard to generalize since layout e.g. contains header with three fields.
   - [ ] Add statistics object which tracks peak and percentile latencies with memory and CPU usage.
   - [ ] Add support for REST API YAML responses.
   - [ ] Add upload command like in setup example from https://github.com/kennethreitz/setup.py/blob/master/setup.py
   - [ ] How to add custom Falcon error codes? Now e.g. 500 is HTML string and it is different than normal Snippy server error code.
   - [ ] How to add custom Falcon exception handling through snippy logger?

## SECURITY
   - [ ] Add /snippy/api/auth/v1 for login. Same base /snippy/api/ for all routes.
   - [ ] Remove server name and version from HTTP responses. This would require overriding Gunicorn https://stackoverflow.com/a/21294524.

## FIX
   - [ ] Fix failure to process request like SSL error does not refresh OID. Is there a hook for this?
   - [ ] Fix Parser which assumes always UTF-8. If CLI terminal has something else, this fails.
   - [ ] Fix terminal encodings other than utf-8. Something like this may be needed https://stackoverflow.com/a/33812744.
   - [ ] Fix the Generate() does not need 'json.loads('{"links": {"self": "' + uri + '"}, "data": null}'))' because code is not called with emty collection.
   - [ ] Fix error string that complains about snippet content matching to empty template when the data is empty. See test_api_create_snippet_017.
   - [ ] Fix test reference to match to main(['snippy', 'search', '--sall', '.', '--profile']) and new document stuff
   - [ ] Fix updating cls.server = cls.source.server does not make sense after start. But this was propably fix to some other problem.
   - [ ] Fix insert_content and digest check is probably unnecessary. Remove it after content refactor.
   - [ ] Fix server crash (use e.g. sys.exit(0)) loses e.g. debug config like -vv
   - [ ] Fix all post responses to have link to created resource. Why this is not always included? Only in updates but not in create?
   - [ ] Fix 'WSGIWarning: Unknown REQUEST_METHOD: 'PATCH'' It seems Python 2.7 does not support PATCH somewhere?
   - [ ] Fix testing error titles. Some contain the hash which now prevent all checks for title. Some titles should be checked.
   - [ ] Fix regexp filter in Migrate. It is not there in apply_filters? No test for this because the failure is not noticed? Move this from terminal to apply_filter.
   - [ ] Fix failing tests print the help. Something was broken. This applies only (rare?) some cases? This comes from UT sqlite cases at least.
   - [ ] Fix help tests since it is not reading new _cli_ tests. What I was thinking?
   - [ ] Fix make test if pytest cover leaves hanging files like .coverage.localhost.localdomain.4727.176219. Add --cover-erase in commmand? // https://bitbucket.org/ned/coveragepy/issues/476/coverageexception-cant-add-arcs-to
   - [ ] Fix when server parameters are erronous, error text from argparse is misleading since it complains about the content operations. Custom errors for --server?
   - [ ] Fix OpenAPI specs. The ResponseData and the attributes contain mandatory 'dhttps://stackoverflow.com/a/33812744ata' field. This is not true if resouce field like brief is requirested.
   - [ ] Fix export the original which contains additional whitespace before the exported template in the DATE field. Was this some test?
   - [ ] Fix indention in snippy: error: argument   {create,search,update,delete,export,import}. This indention is actually "must" in --help
   - [ ] Fix the REST API self link is not always present. It is set only in case of resources and if the digest field is not dropped from response.
   - [ ] Fix if the sys._getframe migth not exist in all Python implementations. Rerring to CPython. There is small performance advance using this. Fix?
   - [ ] Fix the example string from travis.yml to debug cores. Tee problem is not visible anymore so this requires more investigation.
   - [ ] Why falcon.API fails but the falcon import seems not to produce ImportError when the falcon is not imported?
   - [ ] Why enabling debug logs in pytest fixture for server does not show the logs from mocked REST API call? It only shows fixture imports.
   - [ ] Why 'I/O operation on closed file' is generated as in SCRIBLING.md
   - [ ] Why Logger() UT tests produce out to capsys when the logger Pytest fixture is not used? The logger fixture hides something?
   - [ ] How to use double hyphen with Snippy search queries? Like in: search --sall '--all'
   - [ ] Why changing self._data = data in data setter in line 160 to self.data = data in config base seems to cause core. This can be used to set the Travis gdb parameters.
   - [ ] Should _add_date in Content() be based on updated when DATE already set? The reason would be that this sets the text template DATE and it should be always latest which is updated?

## REFACTOR
   - [ ] Storage update() supports only one resource and this is not in line with others. Change to collection?
   - [ ] Offset based pagination is slow with large data sets (how large?). Measure with test. This was improved in laest sqlite 3.24.0 https://www.sqlite.org/changes.html
   - [ ] Refactor internal class level variables and methods to start with _ prefix.
   - [ ] Read storage schema directly to config() like the content templates.
   - [ ] Refactor --editor? Now it always means yes. The code forces yes to some cases like update solution. This parameter could be changed to no/yes to override internals.

## TESTS
   - [ ] Refactor UT tests for sqlite DB module.
   - [ ] Add test that verifies that OID is not changing duringn one operation. Run two operations and check two OIDs in dict.
   - [ ] Test Collection()/Resource() ne - probably UT tests.
   - [ ] Add tests that tries to sort based on non existent field. Is there already such case - migth be?
   - [ ] Refactor API tests based on update tests.
   - [ ] How to test case where required Python module is missing? Tests can be skipped when module is missing but how to simulate this? Try with Logger and gunicorn.
   - [ ] Is tested? import first content that already exist but second is new? Should result OK. Check test_cli_import_snippet_018-> Is the order this?
   - [ ] Add unit test for Cause.debug().
   - [ ] Add test to verify --help without server depdencies. This is the PyPI case.
   - [ ] Add custom parameter to pytest to enable debug logs in snippy fixture easily. Read https://docs.pytest.org/en/latest/example/simple.html?highlight=pytest_addoption
   - [ ] Add tests for 3 scenarios that exit with log in the startup.
   - [ ] Observe if Content.mocked_open and Content.imported_dict has sorting problems because of the hash. This could already sorted because the comparison sorts always the output.
   - [ ] Why test_cli_import_snippet_009 requires import-remove-utc but the 001 does not?
   - [ ] Why delete_storage requires not try/catch block for file remove when the existence is tested? This was with after server/snippy.run refactoring.
   - [ ] Fix api performance test failure which leaves the server running and hanging.
   - [ ] Test URL encoded REST API queries. The same problem that was with %2C may be with other formats.
   - [ ] Test manually the exception cases for example with file with Python3 and 2.7. Some exceptions may not be in Python2.7.
   - [ ] Fix patching in specific module. E.g snippy.migrate.migrate.os.path.isfile does not patch only specified module. Find 'side_effect' in import snippet.
   - [ ] Fix one failing API test fails all the WF cases? The cleanup does not work?
   - [ ] Why API performance test is so slow? Changed to http.client with 20% perf gain but still slow. Profile code next.
   - [ ] Why tests are failing if falcon is not installed? There is something strange when falcon is uninstalled. After uninstall import still works but variables not there?

## DOCUMENTS
   - [ ] Move test case brief to test case document. This cannot be done untill are cases are in new format because the documentation is lost. When this is done, check the autodock before massive desc move.
   - [ ] Add link to specific OAS (swaggerhub) specficiation from homepage and docs.
   - [ ] Add document note that content type is application/vnd.api+json; charset=UTF-8 inclufing the character set.
   - [ ] It is not possible in OAS 2 to deffine single mandatory parameter from group? For example search must have at least one for GET. For OAS 3 this works?
   - [ ] Document that importing content defined with digest will be update operation internally. This allows importing the same content data again with OK cause.
   - [ ] Add to document that using double dash is interpreted as option. To use this in grep: search --sall "--all" --no-ansi | grep -- '--all'
   - [ ] Update documents.

## BUBLING UNDER
   - [ ] Add optional extra fields for logging.warning('test', extra={'foo': 'bar'}) which might be good for json. What fields to add?
   - [ ] There is a pylint bug that it does not see see Python decorators being used with underscore // https://github.com/PyCQA/pylint/issues/409
   - [ ] Add setup.py longdescription from readme.rst. // https://github.com/pypa/sampleproject/blob/master/setup.py
   - [ ] Check security implications from using setup.py (runs code) // https://stackoverflow.com/questions/44878600/is-setup-cfg-deprecated
   - [ ] Add very strict validation for REST API? Even a light failure in params generate error?
   - [ ] How to add upgrade procedure? Is this needed? What happens when there is content stored and pip upgrade is made?
   - [ ] How to sign git commits. /1/ https://help.github.com/articles/signing-commits-with-gpg/) and code n PyPI (?)
   - [ ] How to sign PyPI code? Is this feasible?
   - [ ] Add statistics print that shows the amout of snippets and unique categories.
   - [ ] Fix case described in 'git log 11448a2e90dab3a' and somehow and make test_wf a bit nicer?
   - [ ] How to use BytePackager/packagecore?
   - [ ] Fix the Python2 test database naming to be random temp file in the same folder to allow parallelism.
   - [ ] Why when in Python2 a database test fails, it leaves hanging resources and DB clean does not work? Was this fixed into sqlite3_helper already?
   - [ ] How to better prevent commits to snippy.db than git hooks or git --assume-unchanged?

## FOLLOW EXTERNAL BUGS/ISSUES
   - [ ] There is a pylint bug that it does not see see Python properties being used with underscore. // https://github.com/PyCQA/pylint/issues/409
   - [ ] Python logging is not following ISO8601 format and it cannot have timezone. Workaround done for Logger().
   - [ ] Python module jsonschema has open fault that prevent splitting schema to multiple files. // https://github.com/Julian/jsonschema/issues/313
   - [ ] Python module openapi2jsonschema works only in Python 2. // https://github.com/garethr/openapi2jsonschema/issues/6

## DONE
   - [x] Fixed OID refresh for the first request and added server running and stopped logs which can be silenced with '-q'.
   - [x] Added support for OPTIONS get allowed methods for different routes.
   - [x] Added UTF-8 coded unicode string support for server and CLI.
   - [x] Added test to verify updates based on digest show already stored content in editor.
   - [x] Change Content to Collection that contains list of Resources.
   - [x] Added support to GET resource fields with URI's like /snippets/54e41e9b52/brief.
   - [x] Added safety check and security event based on log message length.
   - [x] Changed REST API default base bath to /snippy/api/app/v1 to prepare auth and admin paths.
   - [x] Fixed JSON API UTC time to follow ISO8601 format with micsecond accuracy.
   - [x] Fixed check that forces search limit and offset to be positive integers.
   - [x] Added search limit=0 as special case that returns metadata in GET response.
   - [x] Added pagination links to GET responses.
   - [x] Added meta field for pagination purposes to HTTP GET responses.
   - [x] Added offset to enable GET pagination with limit.
   - [x] Added X-HTTP-Method-Override header support for POST to map it to PUT, PATCH and DELETE.
   - [x] Added pretty print response by default. Configurable with --compact-json option for server.
   - [x] Added documentation for content attributes how they behave when created and updated with POST, PUT and PATCH.
   - [x] Added PATCH support for partial updates.
   - [x] Removed delete operation on collections. Delete is allowed only with resource parameter in URL.
   - [x] Added unit tests for Logger module.
   - [x] Optimized calls to system time.
   - [x] Removed unnecessary conntent template check when content was parsed. The check is made before insert.
   - [x] Fixed server log settings that worked only for the first operation.
   - [x] Removed direct access to sys.argv from the code. Now the sys.argv is passed only from the main level.
   - [x] Added tests to verify the correct JSON API v1.0 media type application/vnd.api+json including charset=UTF-8.
   - [x] Changed test to use snippy.run instead of run_cli or run_server which are now internal methods.
   - [x] Removed unnecessary help text in test case failures. This was achieved by using dynamic quiet parameter.
   - [x] Fixed license not to reflect AGPLv3 or later in all places referring to license.
   - [x] Added the default help message when tool is run without any parameters.
   - [x] Fixed README.rst to work also in PyPI.
   - [x] Fixed local doc build.
   - [x] Added proper prints for all cases where the tool exists because of internal failure in the startup.
   - [x] Changed exported yaml and json to use 'meta' instead of 'metadata'.
   - [x] Added created and updated fields into content.
   - [x] Added simple statistics to time each API transaction latency. The output is in debug logs.
   - [x] Fixed resource or collection not found to return 404. In Cli the response is ok but now in API it is 404.
   - [x] Noted that JSON API specification does not forbid sending data.links.self when GET does not return resource.
   - [x] Changed OpenAPI definitions to exclude the data.id member from POST and PUT requests.
   - [x] Added failure handling to JSON validation where any failure will invalidate the whole request.
   - [x] Added 403 Forbidden as required by JSON API v1.0 specification if client generated ID is not supported.
   - [x] Fixed POST and PUT respomses data.id to have the message digest.
   - [x] Fixed OpenAPI specification HTTP codes and prepared it for Solution definitions.
   - [x] Added configuration for database location.
   - [x] Added configuration for server port and IP address.
   - [x] Added explicit versions for most of the external dependencies.
   - [x] Added initial checking of JSON schema against POST and PUT requests.
   - [x] Added Content-Type: application/vnd.api+json for server responses.
   - [x] Changed meta in helloAPI and error response. Meta is now synchronized and has links to docs and oas.
   - [x] Updated OpenAPI and Swagger specifications to follow the JSON API v1.0 defintions that are used.
   - [x] Added configurable server base path.
   - [x] Fixed --log-json option with command line interface.
   - [x] Changed tests to use pytest and correct teardown class.
   - [x] Added support for /api/v1/solutions.
   - [x] Fixed incorrect digest in self link being returned if the operation updated resource.
   - [x] Optimized unnecessary JSON conversion when generating content response to JSON API.
   - [x] Changed REST API base bath to /snippy/api/v1.
   - [x] Added GMT time and ISO8601 format to JSON logs.
   - [x] Added JSON formatted log output to stdout with --log-json option.
   - [x] Removed unused logging handlers under gunicorn namespace and quaranteed one line logs with -vv option.
   - [x] Added Gunicorn custom logger that routes the logs via Snippy.Logger.
   - [x] Fixed regular expression default. Empty string is valid regexp but accidetal empty tuple is not.
   - [x] Fixed the config base __repr__.
   - [x] Fixed REST API parameters separated with %2C like in 'fields=brief%2Ccategory'.
   - [x] Fixed setup.cnf referring to non existent file. Added universal for bdist_wheel.
   - [x] Fixed empty tag and link list containing empty string in REST API response JSON.
   - [x] Added repr into ConfigSourceBase to be used like: print(repr(self.config.source)).
   - [x] Fixed incorrect default value for list parameter in configuration source.
   - [x] Added a test to verify creating multiple snippets in list context.
   - [x] Added programming language classifiers for Python 3 and Python 2 main releases.
   - [x] Optimized the cause setting in case of successful cause. In this case the module is not set.
   - [x] Fixed GET /api/v1/snippets to result all snippets if no search criterias are defined.
   - [x] Fixed OAS definition for PUT return status. The PUT returns 200 OK with body that contains updated content.
   - [x] Fixed REST API response status code setting in case multiple snippets are added at once.
   - [x] Fixed REST API content data to work in string context lines separted by newlines and in list context.
   - [x] Tested using same URL parameter multiple times. Common behaviour is coming from Falcon framework.
   - [x] Fixed list of links to allow only space and bar "|" characters to separate links.
   - [x] Optimized the called module and line number fetching that was causing large performance penalty.
   - [x] Added new cause code framework that operates with JSON data structures and HTTP status codes.
   - [x] Added field limits that can be applied to REST API JSON responses.
   - [x] Fixed --sgrp with any search criteria to behave like leaving keywords out, using dot or empty.
   - [x] Added experimental REST API with two tests to try it out.
   - [x] Fixed console tests and the test_console_very_verbose_option.
   - [x] Fixed Snippy() to use 'snippy' instead of root logger. This also fixed the -vv usage in Pylint.
   - [x] Documented global data (like Config() or Cause()) being shared with all instances of Snippy().
   - [x] Added possibility to limit search all and tag fields to defined list of groups.
   - [x] Fixed tool version to always print to stdout.
   - [x] Fixed that all logs printed to stdout.
   - [x] Added version list and run alias into database schema.
   - [x] Added support to search content with partial strings.
   - [x] Changed export to support all search criteria and be able to export multiple matching content.
   - [x] Changed sqlite3 cursor usage. Now to cursor is immediately released after operation.
   - [x] Fixed 'snippy search' that was missing the search criteria
   - [x] Fixed 'snippy search --filter .*(\$\s.*)' that produced internal error.
   - [x] Changed error text in case no search criteria was added. The whole criteria may be also missing.
   - [x] Added --no-ansi option support to test case document output.
   - [x] Added tests to use search keywords like --stag or  --sall for delete operations.
   - [x] Changed the Config().reset() to not to create new object when calling and returning from reset().
   - [x] Fixed incorrect OK result when no content was imported at all.
   - [x] Fixed import failure message when same solution data was imported twice.
   - [x] Added support for importing multiple contents from text format.
   - [x] Fixed PyPI long description that was wrapping lines incorrect.
   - [x] Fixed content utc time being null. The time was not read from the template and it may have resulted None time.
   - [x] Fixed the file next() (python2) vs. readline() (python3) for devel.reference.
   - [x] Fixed the last missing empty line(s) from solution import.
   - [x] Added support to specify migrated content with message digest (update specific content).
   - [x] Fixed importing a template so that user does not have to define category in command line.
   - [x] Changed argument parsing for template file. The argparse fails already if no arguments are set to --template.
   - [x] Added import from file which was created from template.
   - [x] Added missing export of content template file.
   - [x] Fixed exporting without specifying the file for operation.
   - [x] Fixed export operation workflow test to properly mock the generated file.
   - [x] Added tox to run tests with multiple Python versions.
   - [x] Fixed invalid message digest during import. Now the digest is checked and updated if needed.
   - [x] Fixed updating solution without --solution option causes the content to be created as snippet.
   - [x] Fixed import content data that already exist. If the data is already in there, it is still OK case.
   - [x] Added same search implementation into solution than snippet.
   - [x] Added easy printing for the Content() so that print(content) works. By default the colors are used.
   - [x] Changed cause management to allow the code flow with empty defaults till the end.
   - [x] Changed log string formatting to avoid doing the formatting with '.format()' when passing the string.
   - [x] Added docker container for the snippy.
   - [x] Fixed importing unknown file that terminates with exception.
   - [x] Fixed importing utc timestamps. The timestamp is not created again when content is imported.
   - [x] Added filename from solution to database.
   - [x] Added import defaults with for snippets and solutions.
   - [x] Fixed solution update that duplicated the header.
   - [x] Fixed incorrect mocking of database that created file::memory:?cache=shared with Python2.
   - [x] Fixed error handling in case mandatory content was not provided or it was empty.
   - [x] Added delete to work with user provided content like in case of update.
   - [x] Fixed delete in case user provided invalid digest like empty (matches all) or to short.
   - [x] Fixed Python 2.7 compatibility.
   - [x] Changed content to be tuple so that it is bit nicer in the yaml and future processing should be easier.
   - [x] Added new storage location with packaging and import defaults.
   - [x] Changed order of links and tags in the terminal output.
   - [x] Fixed the pip packaging and added the uninstall in Makefile.
   - [x] Fixed Apache license layout in generated document. Now the lincese is just pure text.
   - [x] Fixed the make docs and _static folder by creating dummy content and changing the name to source.
   - [x] Changed absolute path of database.sql to relative. This removed the need for mock and relative is better.
   - [x] Fixed hanging database resources that failed sequential test in case of database test failure.
   - [x] Added timestamp in UTC time for created snippets.
   - [x] Added search with content with -c|--content option.
   - [x] Added basic snippet test suite in common library to avoid writing them to multiple test cases.
   - [x] Changed snippet management. Now Storage() takes care of the snippet conversion between formats.
   - [x] Changed version definition. There is now version.py that is used to read the version.
   - [x] Added support to limit lenght of log strings with -vv option. The --debug option prints full lines.
   - [x] Added search key that allows printing all snippets.
   - [x] Added support for --stag and --sgrp options to search from tags and group columns.
   - [x] Fixed the problem that the digest changed even though no changes were made in editor for the content.
   - [x] Fixed editor update that changed the list of tags to one string in a list.
   - [x] Fixed exit code suppression with the -q option.
   - [x] Added default group 'default' for the content.
   - [x] Added exit status that is by default the only string printed. Options -vv or --debug enable loggin.
   - [x] Fixed inserting same snippet again so that the error is handled nicely.
   - [x] Changed the editor flag internally so that used do not need it when update is made with digest.
   - [x] Changed the CLI commands to behave and look like standard Linux CLI design.
   - [x] Changed small methods that have simple tests in Config() to use ternary operator.
   - [x] Changed print layout and the group to remove space after @ '.. force @docker [2dcbecd10330ac4d]'
   - [x] Changed the resolution to solution since the later is better.
   - [x] Changed the category internally to group to match new command line.
   - [x] Added possibility to update existing snippet.
   - [x] Changed delete to work with the snippet digest instead of database rown number.
   - [x] Added hashes to identify snippets.
   - [x] Changed database tests to use dictionary format.
   - [x] Changed command line arguments to be more suitable for resolve cases as well.
   - [x] Added import functionality from json and yaml files.
   - [x] Added support for categories that allow grouping snippets into larger groups.
   - [x] Added command line option --debug to elevate the debug level and set the default level to error.
   - [x] Added text format export on top of yaml and json.
   - [x] Added multiline command snippets.
   - [x] Added input from editor.
   - [x] Changed tags to behave like links in exported yaml and json files. Keep terminal output of tags as string.
   - [x] Fixed argument testing and printing for tags and find arguments
