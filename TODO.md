## TODO
   - [ ] Set also other than quiet parameters as dynamic parameters.
   - [ ] Remove DELETE collection and allow it only for specific resource.
   - [ ] Wheel seem so create PyPI package that cannot access the defaults? This was working with sdist.
   - [ ] Add test with new media type for JSON API specs.
   - [ ] Add test to verify --help without server depdencies. This is the PyPI case.
   - [ ] Fix export the original which contains additional whitespace before the exported template in the DATE field.
   - [ ] Tests are failing if gunicorn is not installed.
   - [ ] Fix help tests since it is not reading new _cli_ tests.
   - [ ] Add custom parameter to pytest to enable debug logs in snippy fixture easily. Read https://docs.pytest.org/en/latest/example/simple.html?highlight=pytest_addoption
   - [ ] snippy.run() does not return but run_cli() does. This does not make sense. This is due to tests which use run_cli. Refactor tests to use run()
   - [ ] Add tests for 3 scenarios that exit with log in the startup.
   - [ ] When server parameters are erronous, error text from argparse is misleading since it complains about the content operations. Custom errors for --server?
   - [ ] Change tests to use run instead of run_cli(). The run is better and the proper way to control this.
   - [ ] Move profile a bit later to use Config.profiler? The logger could use config but not good to add because of depencies?
   - [ ] Add unit test for logger: 1) TZ with json-logs and others, 2) JSON-logs and other with --debug 3) JSON-logs and others with -vv, 4) OID change.
   - [ ] Observe if Content.mocked_open and Content.imported_dict has sorting problems because of the hash. This could already sorted because the comparison sorts always the output.
   - [ ] Why test_cli_import_snippet_009 requires import-remove-utc but the 001 does not?
   - [ ] Mocking text file simply refuses to work from pytest fixtures.
   - [ ] Add link to specific OAS (swaggerhub) specficiation from homepage and docs.
   - [ ] Add document note that content type is application/vnd.api+json; charset=UTF-8 inclufing the character set.
   - [ ] Fix JSON API UTC time field does not follow ISO8601 format. This affects to utc mock and digest. It is better to refactor tests to make this easier.
   - [ ] Are 1) if content_copy.is_template(edited=item): and 2) if content.is_template(): redundant and only later needed? Affects also test. Refactor tests first.
   - [ ] Make operation timestamp to Config(). This could be helpfull since it guarantees same stamp to output during one operation. Also reduces calls to get_utc_time
   - [ ] The pytest setup and teardown are class mehotds so fix def teardown_class(self): @classmethod def teardown_class(cls):
   - [ ] Add support for PATCH: "If you want partial updates, use PATCH instead."
   - [ ] Add total number of resources in meta like in http://jsonapi.org/examples/.
   - [ ] Add limit to multilevel sort fields to two fields to avoid complex scenarios.
   - [ ] Fix the get_template to Content().
   - [ ] Add limits to all parameters: column array size, sort array size, etc.
   - [ ] Add paginations and offsets to JSON API. Add 'offset' and it could work so that result is list where user points. Needs the total.
   - [ ] Investigate 'I/O operation on closed file' note in SCRIBLING.md
   - [ ] Add customer Falcon error code? now the 500 is string HTML and it is different than normal server error code.
   - [ ] It is not possible in OAS 2 to deffine single mandatory parameter from group? For example search must have at least one for GET. For OAS 3 this works?
   - [ ] Fix one failing API test fails all the WF cases? The cleanup does not work?
   - [ ] Fix "Make sure clients can use POST with the X-HTTP-Method-Override header to fake a PUT request, because some proxies only know GET and POST and will reject PUT requests."
   - [ ] Fix Override header: "GET requests should never change data on the server!" // http://www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api
   - [ ] Add more tests /api/v1/snippets.
   - [ ] Update documents.
   - [ ] =============================================================
   - [ ] Move test case brief to test case document. This cannot be done untill are cases are in new format because the documentation is lost. WHen this is done, check the autodock before massive desc move.
   - [ ] Fix mocking UTC it is a mess now.
   - [ ] Fix indention in snippy: error: argument   {create,search,update,delete,export,import}. This indention is actually "must" in --help
   - [ ] Fix is there way to not to use sys.args in Cli help for examples and tests? Now the cli() help and profile are only ones using sys.argv directly.
   - [ ] Why API performance test is so slow? Changed to http.client with 20% perf gain but still slow. Profile code next.
   - [ ] Move the sfields internal setting to Config and keep the clear sort fields tuple in Base?
   - [ ] Add the Falcon exception handling through snippy logger.
   - [ ] Fix api performance test failure which leaves the server running and hanging.
   - [ ] Test URL encoded REST API queries. The same problem that was with %2C may be with other formats.
   - [ ] Add support to run with runalias.
   - [ ] Add support to add versions to version list.
   - [ ] Change is_template in Content to __cmp__.
   - [ ] Fix next devel version to use 0.8.dev to separte possible git installs from released content.
   - [ ] Add support to print only selected fields, like brief and digest for text output. Hard to generalize since layout e.g. contains header with three fields.
   - [ ] Hide internal class level variables with _ or __ prefix. The intention is not to allow access to these.
   - [ ] How to use double hyphen with Snippy search queries? Like in: search --sall '--all'
   - [ ] Add to document that using double dash is interpreted as option. To use this in grep: search --sall "--all" --no-ansi | grep -- '--all'
   - [ ] Test manually the exception cases for example with file with Python3 and 2.7. Some exceptions may not be in Python2.7.
   - [ ] Document that solution text header date is not updated when the solution is updated. The metadata is updated.
   - [ ] Document that importing content defined with digest will be update operation internally. This allows importing the same content data again with OK cause.

## BUBBLING UNDER
   - [ ] Try to remove few remaining cases that require unittest for specificits assets it this makes sense.
   - [ ] Create statistics object which tracks peak and percentile latencies with memory and CPU usage.
   - [ ] Try to move the Config.debug to staticmethods and make them available immediately so they can be used e.g. from Logger.
   - [ ] The REST API self link is not always present. It is set only in case of resources and if the digest field is not dropped from response.
   - [ ] Changing self._data = data to self.data = data in config base seems to cause core. This can be used to set the Travis gdb parameters.
   - [ ] Add optional extra fields for logging.warning('test', extra={'foo': 'bar'}) which might be good for json.
   - [ ] There is a pylint bug that it does not see see Python decorators being used with underscore // https://github.com/PyCQA/pylint/issues/409
   - [ ] See setup example from https://github.com/kennethreitz/setup.py/blob/master/setup.py
   - [ ] Add setup.py longdescription from readme.rst. // https://github.com/pypa/sampleproject/blob/master/setup.py
   - [ ] Check security implications from using setup.py (runs code) // https://stackoverflow.com/questions/44878600/is-setup-cfg-deprecated
   - [ ] Add very strict validation for REST API? Even a light failure in params generate error?
   - [ ] Now --editor always means yes. The code forces yes to some cases like update solution. This parameter could be changed to no/yes to override internals.
   - [ ] It was noted that sys._getframe migth not exist in all Python implementations. Rerring to CPython. There is small performance advance using this. Fix?
   - [ ] Is there a way to get logs from Python logger from stdout? Mocking stdout to StringIO does not even though the logger stream is stdout.
   - [ ] Fix patching in specific module. E.g snippy.migrate.migrate.os.path.isfile does not patch only specified module. Find 'side_effect' in import snippet.
   - [ ] Fix the example string from travis.yml to debug cores. Tee problem is not visible anymore so this requires more investigation.
   - [ ] Add support for REST API YAML responses.
   - [ ] How to add upgrade procedure? Is this needed? What happens when there is content stored and pip upgrade is made?
   - [ ] How to sign git commits. /1/ https://help.github.com/articles/signing-commits-with-gpg/) and code n PyPI (?)
   - [ ] How to sign PyPI code? Is this feasible?
   - [ ] Add statistics print that shows the amout of snippets and unique categories.
   - [ ] Fix case described in 'git log 11448a2e90dab3a' and somehow and make test_wf a bit nicer?
   - [ ] How to use BytePackager/packagecore?
   - [ ] Fix the Python2 test database naming to be random temp file in the same folder to allow parallelism.
   - [ ] Why when in Python2 a database test fails, it leaves hanging resources and DB clean does not work? Was this fixed into sqlite3_helper already?
   - [ ] How to better prevent commits to snippy.db than git hooks or git --assume-unchanged?

## FOLLOW EXTERNAL BUGS/ISSUES
   - [ ] There is a pylint bug that it does not see see Python properties being used with underscore. // https://github.com/PyCQA/pylint/issues/409
   - [ ] Python logging is not following ISO8601 format and it cannot have timezone.
   - [ ] Python module jsonschema has open fault that prevent splitting schema to multiple files. // https://github.com/Julian/jsonschema/issues/313
   - [ ] Python module openapi2jsonschema works only in Python 2. // https://github.com/garethr/openapi2jsonschema/issues/6

## DONE
   - [x] Removed unnecessary help text in test case failures. This was achieved by using dynamic quiet parameter.
   - [x] Fixed license not to reflect AGPLv3 or later in all places referring to license.
   - [x] Added the default help message when tool is run without any parameters.
   - [x] Fixed README.rst to work also in PyPI.
   - [x] Fixed local doc build.
   - [x] Added proper prints for all cases where the tool exists because of internal failure in the startup.
   - [x] Changed exported yaml and json to use 'meta' instead of 'metadata'.
   - [x] Added created and updated fields into content.
   - [x] Added simple statistics to time each API transaction latency. The output is in debug logs. 
   - [x] Fixed resource or collection not found to return 404. In Cli the response is ok but now in API it is 404.
   - [x] Noted that JSON API specification does not forbid sending data.links.self when GET does not return resource.
   - [x] Changed OpenAPI definitions to exclude the data.id member from POST and PUT requests.
   - [x] Added failure handling to JSON validation where any failure will invalidate the whole request.
   - [x] Added 403 Forbidden as required by JSON API v1.0 specification if client generated ID is not supported.
   - [x] Fixed POST and PUT respomses data.id to have the message digest.
   - [x] Fixed OpenAPI specification HTTP codes and prepared it for Solution definitions.
   - [x] Added configuration for database location.
   - [x] Added configuration for server port and IP address.
   - [x] Added explicit versions for most of the external dependencies.
   - [x] Added initial checking of JSON schema against POST and PUT requests.
   - [x] Added Content-Type: application/vnd.api+json for server responses.
   - [x] Changed meta in helloAPI and error response. Meta is now synchronized and has links to docs and oas.
   - [x] Updated OpenAPI and Swagger specifications to follow the JSON API v1.0 defintions that are used.
   - [x] Added configurable server base path.
   - [x] Fixed --json-logs option with command line interface.
   - [x] Changed tests to use pytest and correct teardown class.
   - [x] Added support for /api/v1/solutions.
   - [x] Fixed incorrect digest in self link being returned if the operation updated resource.
   - [x] Optimized unnecessary JSON conversion when generating content response to JSON API.
   - [x] Changed REST API base bath to /snippy/api/v1.
   - [x] Added GMT time and ISO8601 format to JSON logs.
   - [x] Added JSON formatted log output to stdout with --json-logs option.
   - [x] Removed unused logging handlers under gunicorn namespace and quaranteed one line logs with -vv option.
   - [x] Added Gunicorn custom logger that routes the logs via Snippy.Logger.
   - [x] Fixed regular expression default. Empty string is valid regexp but accidetal empty tuple is not.
   - [x] Fixed the config base __repr__.
   - [x] Fixed REST API parameters separated with %2C like in 'fields=brief%2Ccategory'.
   - [x] Fixed setup.cnf referring to non existent file. Added universal for bdist_wheel.
   - [x] Fixed empty tag and link list containing empty string in REST API response JSON.
   - [x] Added repr into ConfigSourceBase to be used like: print(repr(self.config.source)).
   - [x] Fixed incorrect default value for list parameter in configuration source.
   - [x] Added a test to verify creating multiple snippets in list context.
   - [x] Added programming language classifiers for Python 3 and Python 2 main releases.
   - [x] Optimized the cause setting in case of successful cause. In this case the module is not set.
   - [x] Fixed GET /api/v1/snippets to result all snippets if no search criterias are defined.
   - [x] Fixed OAS definition for PUT return status. The PUT returns 200 OK with body that contains updated content.
   - [x] Fixed REST API response status code setting in case multiple snippets are added at once.
   - [x] Fixed REST API content data to work in string context lines separted by newlines and in list context.
   - [x] Tested using same URL parameter multiple times. Common behaviour is coming from Falcon framework.
   - [x] Fixed list of links to allow only space and bar "|" characters to separate links.
   - [x] Optimized the called module and line number fetching that was causing large performance penalty.
   - [x] Added new cause code framework that operates with JSON data structures and HTTP status codes.
   - [x] Added field limits that can be applied to REST API JSON responses.
   - [x] Fixed --sgrp with any search criteria to behave like leaving keywords out, using dot or empty.
   - [x] Added experimental REST API with two tests to try it out.
   - [x] Fixed console tests and the test_console_very_verbose_option.
   - [x] Fixed Snippy() to use 'snippy' instead of root logger. This also fixed the -vv usage in Pylint.
   - [x] Documented global data (like Config() or Cause()) being shared with all instances of Snippy().
   - [x] Added possibility to limit search all and tag fields to defined list of groups.
   - [x] Fixed tool version to always print to stdout.
   - [x] Fixed that all logs printed to stdout.
   - [x] Added version list and run alias into database schema.
   - [x] Added support to search content with partial strings.
   - [x] Changed export to support all search criteria and be able to export multiple matching content.
   - [x] Changed sqlite3 cursor usage. Now to cursor is immediately released after operation.
   - [x] Fixed 'snippy search' that was missing the search criteria
   - [x] Fixed 'snippy search --filter .*(\$\s.*)' that produced internal error.
   - [x] Changed error text in case no search criteria was added. The whole criteria may be also missing.
   - [x] Added --no-ansi option support to test case document output.
   - [x] Added tests to use search keywords like --stag or  --sall for delete operations.
   - [x] Changed the Config().reset() to not to create new object when calling and returning from reset().
   - [x] Fixed incorrect OK result when no content was imported at all.
   - [x] Fixed import failure message when same solution data was imported twice.
   - [x] Added support for importing multiple contents from text format.
   - [x] Fixed PyPI long description that was wrapping lines incorrect.
   - [x] Fixed content utc time being null. The time was not read from the template and it may have resulted None time.
   - [x] Fixed the file next() (python2) vs. readline() (python3) for devel.reference.
   - [x] Fixed the last missing empty line(s) from solution import.
   - [x] Added support to specify migrated content with message digest (update specific content).
   - [x] Fixed importing a template so that user does not have to define category in command line.
   - [x] Changed argument parsing for template file. The argparse fails already if no arguments are set to --template.
   - [x] Added import from file which was created from template.
   - [x] Added missing export of content template file.
   - [x] Fixed exporting without specifying the file for operation.
   - [x] Fixed export operation workflow test to properly mock the generated file.
   - [x] Added tox to run tests with multiple Python versions.
   - [x] Fixed invalid message digest during import. Now the digest is checked and updated if needed.
   - [x] Fixed updating solution without --solution option causes the content to be created as snippet.
   - [x] Fixed import content data that already exist. If the data is already in there, it is still OK case.
   - [x] Added same search implementation into solution than snippet.
   - [x] Added easy printing for the Content() so that print(content) works. By default the colors are used.
   - [x] Changed cause management to allow the code flow with empty defaults till the end.
   - [x] Changed log string formatting to avoid doing the formatting with '.format()' when passing the string.
   - [x] Added docker container for the snippy.
   - [x] Fixed importing unknown file that terminates with exception.
   - [x] Fixed importing utc timestamps. The timestamp is not created again when content is imported.
   - [x] Added filename from solution to database.
   - [x] Added import defaults with for snippets and solutions.
   - [x] Fixed solution update that duplicated the header.
   - [x] Fixed incorrect mocking of database that created file::memory:?cache=shared with Python2.
   - [x] Fixed error handling in case mandatory content was not provided or it was empty.
   - [x] Added delete to work with user provided content like in case of update.
   - [x] Fixed delete in case user provided invalid digest like empty (matches all) or to short.
   - [x] Fixed Python 2.7 compatibility.
   - [x] Changed content to be tuple so that it is bit nicer in the yaml and future processing should be easier.
   - [x] Added new storage location with packaging and import defaults.
   - [x] Changed order of links and tags in the terminal output.
   - [x] Fixed the pip packaging and added the uninstall in Makefile.
   - [x] Fixed Apache license layout in generated document. Now the lincese is just pure text.
   - [x] Fixed the make docs and _static folder by creating dummy content and changing the name to source.
   - [x] Changed absolute path of database.sql to relative. This removed the need for mock and relative is better.
   - [x] Fixed hanging database resources that failed sequential test in case of database test failure.
   - [x] Added timestamp in UTC time for created snippets.
   - [x] Added search with content with -c|--content option.
   - [x] Added basic snippet test suite in common library to avoid writing them to multiple test cases.
   - [x] Changed snippet management. Now Storage() takes care of the snippet conversion between formats.
   - [x] Changed version definition. There is now version.py that is used to read the version.
   - [x] Added support to limit lenght of log strings with -vv option. The --debug option prints full lines.
   - [x] Added search key that allows printing all snippets.
   - [x] Added support for --stag and --sgrp options to search from tags and group columns.
   - [x] Fixed the problem that the digest changed even though no changes were made in editor for the content.
   - [x] Fixed editor update that changed the list of tags to one string in a list.
   - [x] Fixed exit code suppression with the -q option.
   - [x] Added default group 'default' for the content.
   - [x] Added exit status that is by default the only string printed. Options -vv or --debug enable loggin.
   - [x] Fixed inserting same snippet again so that the error is handled nicely.
   - [x] Changed the editor flag internally so that used do not need it when update is made with digest.
   - [x] Changed the CLI commands to behave and look like standard Linux CLI design.
   - [x] Changed small methods that have simple tests in Config() to use ternary operator.
   - [x] Changed print layout and the group to remove space after @ '.. force @docker [2dcbecd10330ac4d]'
   - [x] Changed the resolution to solution since the later is better.
   - [x] Changed the category internally to group to match new command line.
   - [x] Added possibility to update existing snippet.
   - [x] Changed delete to work with the snippet digest instead of database rown number.
   - [x] Added hashes to identify snippets.
   - [x] Changed database tests to use dictionary format.
   - [x] Changed command line arguments to be more suitable for resolve cases as well.
   - [x] Added import functionality from json and yaml files.
   - [x] Added support for categories that allow grouping snippets into larger groups.
   - [x] Added command line option --debug to elevate the debug level and set the default level to error.
   - [x] Added text format export on top of yaml and json.
   - [x] Added multiline command snippets.
   - [x] Added input from editor.
   - [x] Changed tags to behave like links in exported yaml and json files. Keep terminal output of tags as string.
   - [x] Fixed argument testing and printing for tags and find arguments
